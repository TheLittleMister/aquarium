{% extends "courses/layout.html" %}

{% block script %}

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script src="https://www.google.com/recaptcha/api.js?render=6LfvUi4aAAAAAAsmt0oluwusZwigl1lTG87hk9BC"></script>

    <script>
        grecaptcha.ready(function() {
            $('#loginform').submit(function(e){
                var form = this;
                e.preventDefault()
                grecaptcha.execute('6LfvUi4aAAAAAAsmt0oluwusZwigl1lTG87hk9BC', {action: '{% url 'courses:login' %}'}).then(function(token) {
                    $('#recaptcha').val(token)
                    form.submit()
                });
            })

        });
    </script>


{% endblock %}

{% block body %}
    <br>
    <h2 style="text-align: center; padding-bottom: 30px;">Ingresar</h2>

    {% if message %}
        <div style="text-align: center; color: crimson;font-weight: bold;">{{ message }}</div>
        <br>
    {% endif %}
    <div style="width:300px; text-align:center; margin-right: auto; margin-left:auto;">
    <form id="loginform" action="{% url 'courses:login' %}" method="post">
        {% csrf_token %}
        <div class="form-group">
            <input autofocus class="form-control" type="text" name="username" placeholder="Usuario" required>
        </div>
        <div class="form-group">
            <input class="form-control" type="password" name="password" placeholder="ContraseÃ±a" required>
        </div>
        <input type="hidden" name="g-recaptcha-response" id='recaptcha'>
        <input class="btn btn-primary" type="submit" value="Entrar">
    </form>
    </div>

{% endblock %}
